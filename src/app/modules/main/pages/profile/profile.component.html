<div class="home-style3 profile-pg-1">


    <div class="body-container">

        <div class="container container-llgg">

        <app-header></app-header>


            <!--Contents-->
            <main>

                <!--  Start breadcrumb  -->
                <section class="tc-breadcrumb-style6 p-30 radius-4 bg-white mt-3 wow fadeInUp">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb fw-bold mb-0">
                          <li class="breadcrumb-item color-999"><a href="/main/home">Accueil</a></li>
                
                          <li class="breadcrumb-item active color-000" aria-current="page">profile</li>
                        </ol>
                      </nav>
                </section>
                <!--  End breadcrumb  -->


                <!--  Start profile  -->
                <section class="tc-profile p-30 radius-4 bg-white mt-3 wow fadeInUp mb-3">
                    <div class="row">
                        <div class="col-lg-3">
                            <div class="tabs-side me-lg-5 mb-4 mb-lg-0">
                                <div class="main-info">
                                    <div class="img">
                                        <img src="assets/inner_page/img/avatar.jpg" alt="" class="main-img img-cover">
                                    </div>
                                    <h5 class="fw-bold"> {{user.first_name}} </h5>
                                    <ul class="mt-2 color-666 lh-lg">
                                        <li> <a href="#"> {{user.email}}</a> </li>
                                        <!-- <li> <a href="#"> Los Angeles, CA </a> </li> -->
                                    </ul>
                                </div>
                                <ul class="nav nav-pills" id="pills-tab" role="tablist">
                                    <li class="nav-item" role="presentation">
                                      <button class="nav-link active" id="pills-prof1-tab" data-bs-toggle="pill" data-bs-target="#pills-prof1">
                                            <span> Compte </span> <i class="fal fa-arrow-right"></i>
                                      </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                      <button class="nav-link" id="pills-prof2-tab" data-bs-toggle="pill" data-bs-target="#pills-prof2">
                                            <span> My order </span> <i class="fal fa-arrow-right"></i>
                                      </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                      <button class="nav-link" id="pills-prof3-tab" data-bs-toggle="pill" data-bs-target="#pills-prof3">
                                            <span> My address </span> <i class="fal fa-arrow-right"></i>
                                      </button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="pills-prof4-tab" data-bs-toggle="pill" data-bs-target="#pills-prof4">
                                              <span> Change password </span> <i class="fal fa-arrow-right"></i>
                                        </button>
                                      </li>
                                      <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="pills-prof4-tab" data-bs-toggle="pill" data-bs-target="#pills-prof5">
                                              <span> portefeuille </span> <i class="fal fa-arrow-right"></i>
                                        </button>
                                      </li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-9">
                            <div class="tab-content" id="pills-tabContent">
                                <div class="tab-pane fade show active" id="pills-prof1">
                                    <div class="acount-tab">
                                        <h4 class="fw-bold text-capitalize mb-30">Information du compte  </h4>
                                        <div class="content">
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <div class="form-group mb-4">
                                                        <label for=""> Prenom <span class="color-red1"> * </span> </label>
                                                        <input type="text"[(ngModel)]="user.first_name" name="first_name" class="form-control" placeholder="" >
                                                    </div>
                                                </div>
                                                <div class="col-lg-6">
                                                    <div class="form-group mb-4">
                                                        <label for=""> Nom <span class="color-red1"> * </span> </label>
                                                        <input type="text" class="form-control" placeholder="" [(ngModel)]="user.last_name" name="last_name">
                                                    </div>
                                                </div>
                                                <div class="col-lg-12">
                                                    <div class="form-group mb-4">
                                                        <label for=""> Email  <span class="color-red1"> * </span> </label>
                                                        <input type="text" class="form-control" placeholder=""  [(ngModel)]="user.email" name="email">
                                                    </div>
                                                </div>
                                                <div class="col-lg-12">
                                                    <div class="form-group mb-4">
                                                        <label for=""> Phone  <span class="color-666"> (Optional) </span> </label>
                                                        <input type="text" class="form-control" placeholder=""  [(ngModel)]="user.phone_number" name="phone_number">
                                                    </div>
                                                </div>
                                                <div class="col-lg-12">
                                                    <a href="#" class="butn bg-green2 text-white radius-4 fw-500 fsz-12 text-uppercase text-center mt-20 py-3 px-5"> <span> save </span> </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-prof2">
                                    <div class="orders-tab">
                                        <h4 class="fw-bold text-capitalize mb-30"> Orders History </h4>
                                        <div class="orders">
                                            <div class="order-container" *ngFor="let item of orders">
                                                <div class="order-card">
                                                  <!-- En-tÃªte de la commande -->
                                                  <div class="order-head">
                                                    <div class="row align-items-center">
                                                      <div class="col-lg-6">
                                                        <p class="my-2">
                                                          <span>NUM: </span>
                                                          <strong>#{{ item.id }}</strong>
                                                        </p>
                                                        <p class="my-2">
                                                          <span>DATE: </span>
                                                          <span>{{ item.created | date: 'short' }}</span>
                                                        </p>
                                                      </div>
                                                      <div class="col-lg-6 text-lg-end mt-4 mt-lg-0">
                                                        <span
                                                          class="alert mb-0 py-2"
                                                          [ngClass]="{
                                                            'alert-success': item.status === 'DELIVERED',
                                                            'alert-warning': item.status === 'WAITING_FOR_PAYMENT',
                                                            'alert-info': item.status === 'PROCESSING'
                                                          }"
                                                          role="alert"
                                                        >
                                                          {{ getStatusText(item.status) }}
                                                        </span>
                                                      </div>
                                                    </div>
                                                  </div>
                                              
                                                  <!-- DÃ©tails du produit -->
                                                  <div class="product-card">
                                                    <div class="row gx-3">
                                                      <div class="col-12">
                                                        <div class="product">
                                                          <a href="#0" class="img">
                                                            <img
                                                              [src]="item.order.products[0].medias[0]?.file"
                                                              alt="{{ item.order.products[0].name }}"
                                                              class="img-contain main-image"
                                                            />
                                                          </a>
                                                          <div class="info">
                                                            <h6>
                                                              <a href="#" class="prod-title fsz-14 fw-bold mt-2 hover-green2">
                                                                {{ item.order.products[0].name }}
                                                              </a>
                                                            </h6>
                                                            <div class="price mt-15">
                                                              <h5 class="fsz-18 fw-600">
                                                                Prix : {{ item.order.products[0].selling_price | number }} FCFA
                                                              </h5>
                                                              <h6 class="fsz-16 fw-500 text-secondary">
                                                                Frais de livraison : {{ item.order.delivery_cost | number }} FCFA
                                                              </h6>
                                                            </div>
                                                            <p class="fsz-12 mt-2">
                                                              <i class="fas fa-check-circle color-green2 me-1"></i> In stock
                                                            </p>
                                                          </div>
                                                        </div>
                                                      </div>
                                                    </div>
                                                  </div>
                                              
                                                  <!-- Bouton de paiement -->
                                                  <div class="payment-section text-end mt-3">
                                                    <a  *ngIf="item.status === 'WAITING_FOR_PAYMENT'" role="button" (click)="paid(item.id)" class="butn bg-green2 text-white radius-4 fw-500 fsz-12 text-uppercase text-center mt-20 py-3 px-5"> <span> Payer </span> </a>
                                                    
                                                    <p *ngIf="item.status !== 'WAITING_FOR_PAYMENT'" class="fsz-14 fw-bold text-secondary">
                                                      {{ getPaymentMessage(item.status) }}
                                                    </p>
                                                  </div>
                                                </div>
                                              </div>
                                              

                                          
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-prof3">
                                    <div class="acount-tab">
                                        <h4 class="fw-bold text-capitalize mb-30"> My Address </h4>
                                        <div class="content">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="form-group mb-4">
                                                        <label for=""> Country / Region <span class="color-red1"> * </span> </label>
                                                        <select name="" id="" class="form-control form-select">
                                                            <option value=""> United States (US) </option>
                                                            <option value=""> United States (US) </option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-lg-12">
                                                    <div class="form-group mb-4">
                                                        <label for=""> Street Address </label>
                                                        <input type="text" class="form-control mb-2" placeholder="House number and street name ..." value="House number: 45 , street name: jard street">
                                                        <input type="text" class="form-control" placeholder="Apartment, suite, unit, etc (Optional)" value="Apartment: 42">
                                                    </div>
                                                </div>
                                                <div class="col-lg-12">
                                                    <div class="form-group mb-4">
                                                        <label for=""> Town / City <span class="color-red1"> * </span> </label>
                                                        <input type="text" class="form-control" placeholder="" value="Washington">
                                                    </div>
                                                </div>
                                                <div class="col-lg-12">
                                                    <div class="form-group mb-4">
                                                        <label for=""> State / County <span class="color-red1"> * </span> </label>
                                                        <select name="" id="" class="form-control form-select">
                                                            <option value=""> Washington </option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-lg-12">
                                                    <div class="form-group mb-4">
                                                        <label for=""> Zip Code <span class="color-red1"> * </span> </label>
                                                        <input type="text" class="form-control" placeholder="" value="12345">
                                                    </div>
                                                </div>
                                                <div class="col-lg-12">
                                                    <a href="#" class="butn bg-green2 text-white radius-4 fw-500 fsz-12 text-uppercase text-center mt-20 py-3 px-5"> <span> save </span> </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-prof4">
                                    <div class="acount-tab">
                                        <h4 class="fw-bold text-capitalize mb-30"> Change Password </h4>
                                        <div class="content">
                                            <div class="row">
                                                <div class="col-lg-12">
                                                    <div class="form-group mb-4">
                                                        <label for=""> Current password </label>
                                                        <input type="password" class="form-control" placeholder="">
                                                    </div>
                                                </div>
                                                <div class="col-lg-12">
                                                    <div class="form-group mb-4">
                                                        <label for=""> New password </label>
                                                        <input type="password" class="form-control" placeholder="">
                                                    </div>
                                                </div>
                                                <div class="col-lg-12">
                                                    <div class="form-group mb-4">
                                                        <label for=""> Confirm password </label>
                                                        <input type="password" class="form-control" placeholder="">
                                                    </div>
                                                </div>
                                                <div class="col-lg-12">
                                                    <a href="#" class="butn bg-green2 text-white radius-4 fw-500 fsz-12 text-uppercase text-center mt-20 py-3 px-5"> <span> save </span> </a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-prof5">
                                    <div class="acount-tab">
                                        <h4 class="fw-bold text-capitalize mb-30">Portefeuille</h4>
                                        <div class="content">
                                          <div class="card walet-card text-white p-4 mb-4 rounded-4 position-relative">
                                            <div class="d-flex justify-content-between align-items-center">
                                              <div>
                                                <h5 class="mb-2">Solde total</h5>
                                                <h2 class="mb-0">{{wallet.balance}} XOF</h2>
                                              </div>
                                              <a (click)="showRechargeModal=true" role="button" class="btn btn-light rounded-circle">
                                                <i class="pi pi-plus"></i>
                                              </a>
                                            </div>
                                          </div>
                                          
                                          <div class="transaction-history">
                                            <h3 class="mb-4">Historique des transactions</h3>
                                            <ul class="list-group">
                                              <li class="list-group-item d-flex justify-content-between align-items-center p-3 border-0 mb-2 rounded-3 shadow-sm" *ngFor="let transaction of recharges">
                                                <div class="d-flex align-items-center">
                                                  <div class="transaction-icon me-3">
                                                    <i class="pi pi-arrow-up text-success fs-4"></i>
                                                  </div>
                                                  <div>
                                                    <h6 class="mb-0 fw-bold">Recharge</h6>
                                                    <small class="text-muted">{{transaction.created | date:'dd/MM/yyyy HH:mm'}}</small>
                                                    <br>
                                                    <small class="text-muted">Fournisseur: {{transaction.provider}}</small>
                                                  </div>
                                                </div>
                                                <div class="text-end">
                                                  <span class="fw-bold text-success">+{{transaction.amount}} XOF</span>
                                                  <br>
                                                  <small [ngClass]="{'text-warning': transaction.status === 'PROCESSING', 'text-success': transaction.status === 'COMPLETED', 'text-danger': transaction.status === 'FAILED'}">
                                                    {{transaction.status}}
                                                  </small>
                                                  <br>
                                                  <a *ngIf="transaction.status === 'PROCESSING' && transaction.provider!='CORIS'" [href]="transaction.bill_url" target="_blank" class="btn btn-sm btn-outline-primary mt-2">
                                                    <i class="pi pi-external-link"></i> Payer
                                                  </a>
                                                </div>
                                              </li>
                                            </ul>
                                          </div>
                                        </div>
                                      </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <!--  End profile  -->


            </main>
            <!--End-Contents-->

        </div>

    </div>

 
    


    </div>

    <!--modal-->

    <p-dialog 
    header="Recharger portefeuille"
    [(visible)]="showRechargeModal"
    [modal]="true"
    [closable]="true"
    [style]="{ width: '30rem' }"
    [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"
    [maximizable]="true"
  >
    <div class="p-4">
      <!-- Montant Section -->
      <div class="mb-4">
        <h5 class="text-2xl font-bold mb-3">Entrer le  montant (FCFA)</h5>
        <input type="number"  class=" p-3 amount-input rounded-full" placeholder="2000 " 
               [(ngModel)]="montant" />
      </div>
  
      <!-- Payment Method Section -->
      <div class="mb-4">
        <h5 class="text-2xl font-bold mb-3">Choisir un moyen de payement</h5>

        <div class="row">
            <div class="col-md-6">
                <div class="card paye-card" role="button" (click)="selectedPayment='DEFAULT'" [ngClass]="{'border-orange-500 border-2': selectedPayment === 'DEFAULT'}">
                    <img src="assets/common/assets/imgs/paye.png" style="width: 100%; heigth:100%">
                </div>
            </div>
            <div class="col-md-6">
                <div class="card paye-card" role="button" (click)="selectedPayment='CORIS'"[ngClass]="{'border-orange-500 border-2': selectedPayment === 'CORIS'}">
                    <img src="assets/common/assets/imgs/coris.png" style="width: 100%; heigth:100%">
                </div>
            </div>
        </div>

        <div class="row">
            <a role="button" (click)="onRechargeClick()" class="butn btn-block bg-green2 text-white radius-4 fw-500 fsz-12 text-uppercase text-center mt-20 py-3 px-5"> <span> recharger </span> </a>

        </div>

      </div>
    </div>
  
  </p-dialog>
